# Maintainer:  <tjaart@tjaart.org>
pkgname=tjaart-base
pkgver=1.0.0
pkgrel=8
pkgdesc="Base for tjaart systems"
arch=('any')
url="https://github.com/tjaartvdwalt/arch-pkgs"
license=('MIT')
groups=(tjaart)

user=tjaart
uid=1000
gid=1000
config_home=$pkgdir/home/$user/.config/

depends+=(bash htop mlocate the_silver_searcher wget)

depends+=(openssh)
sshd_config=etc/ssh/sshd_config
backup+=($sshd_config)
source+=(sshd_config)
md5sums+=('SKIP')

depends+=(pulseaudio pavucontrol pulseaudio-alsa)
optdepends+=(pulseaudio-ctl)
pulse_default=etc/pulse/default.pa
backup+=($pulse_default)
source+=(default.pa)
md5sums+=('SKIP')

depends+=(bluez bluez-utils pulseaudio-bluetooth)
bluetooth_main=etc/bluetooth/main.conf
backup+=($bluetooth_main)
source+=(bluetooth_main.conf)
md5sums+=('SKIP')

depends+=(cmus playerctl)

depends+=(zsh)
zshrc=home/$user/.zshrc
backup+=($zshrc)
source+=(.zshrc)
md5sums+=('SKIP')

zlogin=home/$user/.zlogin
backup+=($zlogin)
source+=(.zlogin)
md5sums+=('SKIP')

zprofile=home/$user/.zprofile
backup+=($zprofile)
source+=(.zprofile)
md5sums+=('SKIP')

depends+=(pass)
optdepends+=(pass-audit pass-botp pass-rotate pass-update)

optdepends+=(lfm)
lfm_config=home/$user/.config/lfm/lfm.ini
lfm_keys=home/$user/.config/lfm/lfm.keys
backup+=($lfm_config $lfm_keys)
source+=(lfm.ini lfm.keys)
md5sums+=('SKIP' 'SKIP')

# Print dependencies
depends+=(cups)
optdepends+=(brother-hll2395dw)

# text editor
depends+=(vim)
optdepends+=(vim-tern nerd-fonts-complete)

package() {
  install -Dm 0644 -o root -g root sshd_config "$pkgdir/$sshd"
  install -Dm 0644 -o root -g root default.pa "$pkgdir/$pulse_default"
  install -Dm 0644 -o root -g root bluetooth_main.conf "$pkgdir/$bluetooth_main"
  install -Dm 0640 -o $uid -g $gid lfm.ini "$pkgdir/$lfm_config"
  install -Dm 0640 -o $uid -g $gid lfm.keys "$pkgdir/$lfm_keys"
  install -Dm 0640 -o $uid -g $gid .zshrc "$pkgdir/$zshrc"
  install -Dm 0640 -o $uid -g $gid .zlogin "$pkgdir/$zlogin"
  install -Dm 0640 -o $uid -g $gid .zprofile "$pkgdir/$zprofile"
}

post_install() {
  systemctl enable --now sshd.service
  systemctl enable --now bluetooth.service
}

# changelog=

# vim:set ts=2 sw=2 et:
